#include<stdio.h>
void safety(int,int,int ,int,int,int );
void main()
{
    int n,m,i,j;
    printf("Enter the no.of processes : ");
    scanf("%d",&n);
    printf("\nEnter the no.of resources : ");
    scanf("%d",&m);
    int max[n][m],alloc[n][m],avail[m],need[n][m],finish[n];
    for( i=0;i<n;i++)
    {
        for(j=0;j<m;j++)
        {
            printf("\nEnter max of resources of type %d needed for process %d : ",j+1,i+1);
            scanf("%d",&max[i][j]);
            printf("\nEnter allocated resources of type %d for process %d : ",j+1,i+1);
            scanf("%d",&alloc[i][j]);
            need[i][j]=max[i][j]-alloc[i][j];
        }
    }
    for(i=0;i<m;i++)
    {
        printf("\nEnter the no.of available resources of type %d : ",i+1);
        scanf("%d",&avail[i]);
    }
     for(i=0;i<n;i++)
    {
        finish[i]=0;
    }
    safety(need,alloc,avail,finish);
}
void safety(int tn,int tm,int tneed[][],int talloc[][],int tavail[],int tfinish[])
{
    while(true)
    {
    for(int i=0;i<tn;i++)
    {
        int f=0;
        if(tfinish[i]==0)
        {
            for(int j=0;j<tm;j++)
            {
                if(tneed[i][j]>tavail[j])
                {
                    f=1;
                    break;
                }
            }
            if(f==0)
            {
                for(int a=0;a<tm;a++)
                    tavail[a]+=talloc[i][a];
                tfinish[i]=1;
            }
        }
    }
    int b=0;
    for(int a=0;a<tn;a++)
    {
        if(finish[a]!=1)
        {
            b=1;
            break;
        }
    }
    if(b==0)
    {
        printf("\n\nSAFE MODE");
        break;
    }
    }
}
