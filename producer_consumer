#include<stdio.h>
#include<stdlib.h>
void wait(int);
void signal(int);
void producer();
void consumer();
int c=0,mutex=1,full=0,n=5,empty=5;
void main()
{
        int ch;
  while(1)
  {
          printf("\nOperations available \n1.produce\n2.consume\n3.exit");
          printf("\nEnter your choice : ");
          scanf("%d",&ch);
          switch(ch)
          {
                  case 1: if(mutex==1)
                              {
                                      producer();
                              }
                            else
                             {
                                     printf("resource is busy");
                             }
                            break;

                  case 2:  if(mutex==1)
                              {
                                      consumer();
                              }
                            else
                             {
                                     printf("resource is busy");
                             }
                             break;
                  case 3:exit(0);
                  default:printf("\nInvalid choice");
          }
  }
}
void wait(int a)
{
        a--;
}
void signal(int b)
{
        b++;
}
void producer()
{
        if(c==n)
                printf("\nBuffer is full");
        else
        {
              wait(mutex);
              wait(empty);
              c++;
              printf("\nItem produced");
              signal(full);
              signal(mutex);
        }
}
void consumer()
{
        if(c==0)
                printf("\nEmpty buffer\n");
        else
        {
                wait(mutex);
                wait(full);
                c--;
                printf("\nItem consumed\n");
                signal(empty);
                signal(mutex);
        }
}
